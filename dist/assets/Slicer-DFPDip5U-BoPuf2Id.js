import{a6 as Q,c as v,r as f,D as Y,w as M,o as ee,a9 as L,ar as A,g as p,i as h,B as i,m as te,y as S,A as le,l as k,x as ae,Z as ie,H as ue,I as ne,F as z,E as B,ab as P,as as _,P as D}from"./index-BycDDJRD.js";import{s as re,O as oe,k as se,u as ve}from"./useResponsive-CoxXLe23-DPVWYRx4.js";const R=l=>(ue("data-v-54291cff"),l=l(),ne(),l),de={"data-html2canvas-ignore":"",style:{padding:"0 24px"}},me={class:"vue-data-ui-slicer-labels",style:{position:"relative","z-index":"1","pointer-events":"none"}},pe={key:0,style:{width:"100%",position:"relative"}},he={key:0,class:"minimap",style:{width:"100%"}},ce=["xmlns","viewBox"],fe=["id"],xe=["stop-color"],ye=R(()=>i("stop",{offset:"100%","stop-color":"transparent"},null,-1)),ge=["d","stroke"],be=["x","width","height","fill","rx"],Se=["d","fill"],ke=["x","width","height","fill"],we=["x","width","height","fill"],Ne=["d","fill"],Ce=["d","stroke"],$e=["cx","cy","stroke","fill"],Me=["cx","cy","stroke","fill"],Fe=["x1","x2","y2","stroke"],Ie=["x","height","width","onMouseenter"],Ee=R(()=>i("div",{class:"slider-track"},null,-1)),Le=["min","max"],Ae=["min","max"],ze={__name:"Slicer",props:{background:{type:String,default:"#FFFFFF"},borderColor:{type:String,default:"#FFFFFF"},fontSize:{type:Number,default:14},labelLeft:{type:String,default:""},labelRight:{type:String,default:""},textColor:{type:String,default:"#1A1A1A"},inputColor:{type:String,default:"#1A1A1A"},max:{type:Number,default:0},min:{type:Number,default:0},selectColor:{type:String,default:"#4A4A4A"},useResetSlot:{type:Boolean,default:!1},valueStart:{type:[Number,String],default:0},valueEnd:{type:[Number,String],default:0},minimap:{type:Array,default:[]},smoothMinimap:{type:Boolean,default:!1},minimapSelectedColor:{type:String,default:"#1f77b4"},minimapSelectionRadius:{type:Number,default:12},minimapLineColor:{type:String,default:"#2D353C"},minimapSelectedColorOpacity:{type:Number,default:.2},minimapSelectedIndex:{type:Number,default:null},minimapIndicatorColor:{type:String,default:"#2D353C"}},emits:["update:start","update:end","reset","trapMouse"],setup(l,{emit:x}){const e=l;Q(t=>({e0176a96:V.value,"27e9d329":g.value,"22b19dda":j.value,"081f1459":l.selectColor,"12e0ab32":Z.value}));const r=f(e.min),o=f(e.max),y=v(()=>!!e.minimap.length),w=f(Y()),O=v(()=>{const t=e.max-e.min,u=(r.value-e.min)/t*100,n=(o.value-e.min)/t*100;return{left:`${u}%`,width:`${n-u}%`,background:e.selectColor}}),V=v(()=>e.inputColor),Z=v(()=>e.background),j=v(()=>`${e.selectColor}33`),g=v(()=>e.borderColor),F=v(()=>{let t=[];for(let u=0;u<e.minimap.length;u+=1)t.push(u);return t});function I(){x("reset")}function U(){Number(r.value)>Number(o.value)-1&&(r.value=Number(o.value)-1),x("update:start",Number(r.value))}function G(){Number(o.value)<Number(r.value)+1&&(o.value=Number(r.value)+1),x("update:end",Number(o.value))}M(()=>e.min,t=>{Number(r.value)<Number(t)&&(r.value=Number(t)),Number(o.value)<Number(t)&&(o.value=Number(t))}),M(()=>e.max,t=>{Number(r.value)>Number(t)&&(r.value=Number(t)),Number(o.value)>Number(t)&&(o.value=Number(t))});const N=f(null),a=f({width:1,height:1}),E=f(null);ee(()=>{if(y.value){const t=oe(()=>{const{width:u,height:n}=se({chart:N.value});a.value.width=u,a.value.height=n-47});E.value=new ResizeObserver(t),E.value.observe(N.value)}});const s=v(()=>e.minimap.length?a.value.width/e.minimap.length:0),d=v(()=>{if(!e.minimap.length)return[];const t=Math.max(...e.minimap),u=Math.min(...e.minimap)-10,n=t-(u>0?0:u),m=e.minimap.map((J,X)=>{const K=J-u;return{x:a.value.width/e.minimap.length*X+s.value/2,y:a.value.height-K/n*(a.value.height*.9)}}),C=e.smoothMinimap?L(m):A(m),$=[...m].slice(e.valueStart,e.valueEnd),H=e.smoothMinimap?L($):A($);return{fullSet:C,selectionSet:H,sliced:$,firstPlot:m[e.valueStart],lastPlot:m[e.valueEnd-1]}}),c=v(()=>({x:s.value*r.value+s.value/2,width:a.value.width*((o.value-r.value)/e.max)-s.value})),T=v(()=>({left:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",pointerEvents:"none"})),W=v(()=>({right:0,color:e.textColor,fontSize:`${e.fontSize}px`,top:y.value?"28px":"-28px",direction:"rtl",pointerEvents:"none"})),b=f(e.minimapSelectedIndex);M(()=>e.minimapSelectedIndex,t=>{b.value=t+e.valueStart},{immediate:!0});function q(t){b.value=t,t>=e.valueStart&&t<e.valueEnd&&x("trapMouse",t-e.valueStart)}return(t,u)=>(p(),h("div",de,[i("div",me,[l.valueStart>0||l.valueEnd<l.max?(p(),h("div",pe,[l.useResetSlot?te(t.$slots,"reset-action",{key:1,reset:I},void 0,!0):(p(),h("button",{key:0,"data-cy-reset":"",tabindex:"0",role:"button",class:"vue-data-ui-refresh-button",style:S({top:y.value?"36px":"-16px",pointerEvents:"all !important"}),onClick:I},[le(ve,{name:"refresh",stroke:l.textColor},null,8,["stroke"])],4))])):k("",!0)]),i("div",{class:"double-range-slider",ref_key:"minimapWrapper",ref:N,style:{"z-index":"0"}},[y.value?(p(),h("div",he,[(p(),h("svg",{xmlns:ae(ie),viewBox:`0 0 ${a.value.width<0?0:a.value.width} ${a.value.height<0?0:a.value.height}`},[i("defs",null,[i("linearGradient",{id:w.value,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[i("stop",{offset:"0%","stop-color":`${l.minimapLineColor}50`},null,8,xe),ye],8,fe)]),i("path",{d:`M${d.value.fullSet}`,stroke:`${l.minimapLineColor}`,fill:"none","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",style:{opacity:"1"}},null,8,ge),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:g.value,rx:l.minimapSelectionRadius,stroke:"none"},null,8,be),i("path",{d:`M${s.value/2},${a.value.height} ${d.value.fullSet} L${a.value.width-s.value/2},${a.value.height}Z`,fill:`url(#${w.value})`,stroke:"none",style:{opacity:"1"}},null,8,Se),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:g.value},null,8,ke),i("rect",{x:c.value.x,width:c.value.width<0?0:c.value.width,height:a.value.height,y:0,fill:l.minimapSelectedColor,style:S({opacity:l.minimapSelectedColorOpacity})},null,12,we),i("path",{d:`M${d.value.sliced[0].x},${a.value.height} ${d.value.selectionSet} L${d.value.sliced.at(-1).x},${a.value.height}Z`,fill:`url(#${w.value})`,stroke:"none",style:{opacity:"1"}},null,8,Ne),i("path",{d:`M ${d.value.selectionSet}`,stroke:`${l.minimapLineColor}`,fill:"transparent","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ce),i("circle",{cx:d.value.firstPlot.x,cy:d.value.firstPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,$e),i("circle",{cx:d.value.lastPlot.x,cy:d.value.lastPlot.y,"stroke-width":"0.5",stroke:g.value,r:"3",fill:l.minimapLineColor},null,8,Me),b.value!==null?(p(!0),h(z,{key:0},B(F.value,(n,m)=>(p(),h("g",null,[b.value===n&&n>=l.valueStart&&n<l.valueEnd?(p(),h("line",{key:0,x1:s.value*m+s.value/2,x2:s.value*m+s.value/2,y1:0,y2:a.value.height,stroke:l.minimapIndicatorColor,"stroke-linecap":"round","stroke-dasharray":"2","stroke-width":"1"},null,8,Fe)):k("",!0)]))),256)):k("",!0),(p(!0),h(z,null,B(F.value,(n,m)=>(p(),h("rect",{x:s.value*m,y:0,height:a.value.height,width:s.value,fill:"transparent",style:{"pointer-events":"all !important"},onMouseenter:C=>q(n),onMouseleave:u[0]||(u[0]=C=>{b.value=null,x("trapMouse",null)})},null,40,Ie))),256))],8,ce))])):k("",!0),Ee,i("div",{class:"range-highlight",style:S(O.value)},null,4),P(i("input",{type:"range",class:"range-left",min:l.min,max:l.max,"onUpdate:modelValue":u[1]||(u[1]=n=>r.value=n),onInput:U},null,40,Le),[[_,r.value]]),i("div",{class:"thumb-label thumb-label-left",style:S(T.value)},D(l.labelLeft),5),P(i("input",{type:"range",class:"range-right",min:l.min,max:l.max,"onUpdate:modelValue":u[2]||(u[2]=n=>o.value=n),onInput:G},null,40,Ae),[[_,o.value]]),i("div",{class:"thumb-label thumb-label-right",style:S(W.value)},D(l.labelRight),5)],512)]))}},_e=re(ze,[["__scopeId","data-v-54291cff"]]);export{_e as _};
