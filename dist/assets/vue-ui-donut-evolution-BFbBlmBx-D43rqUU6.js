import{t as Ze,c as x,r as p,o as el,K as ll,j as U,Q as al,D as Te,R as tl,e as K,Y as ol,w as We,q as re,b as ul,V as sl,W as Ee,h as ie,n as nl,M as rl,N as il,g as t,i as o,k as E,l as c,p as vl,s as _,m as P,u as q,v as Q,x as v,y as ve,z as T,Z as cl,A as dl,B as d,C as D,F as m,E as k,P as b,X as yl,O as ce,f as J,J as Oe,_ as He,S as Ie,T as Z,a0 as hl,U as Re}from"./index-BycDDJRD.js";import{s as gl,c as Ve,r as fl,a as bl,x as xl,b as pl,p as ml,C as kl,R as Cl}from"./useResponsive-CoxXLe23-DPVWYRx4.js";import{W as wl}from"./DataTable-BI1tjiA_-Du-0AlA7.js";import{C as $l}from"./Legend-CRMHjbGw-CgnhU_5d.js";import{_ as Ll}from"./Slicer-DFPDip5U-BoPuf2Id.js";const Al=["id"],Nl=["xmlns","viewBox"],zl=["id"],Sl=["stop-color"],Fl=["stop-color"],_l=["id"],Pl=["stop-color"],Tl=["stop-color"],Wl=["stop-color"],El={key:0},Ol=["x1","x2","y1","y2","stroke","stroke-width"],Hl=["x1","x2","y1","y2","stroke","stroke-width"],Il={key:0},Rl=["x1","x2","y1","y2","stroke","stroke-width"],Vl=["x1","x2","y1","y2","stroke","stroke-width"],Ml=["x","y","font-size","fill","font-weight"],Bl=["text-anchor","font-size","fill","transform"],Dl=["x1","y1","x2","y2","stroke","stroke-width"],Xl={key:1},Yl=["cx","cy","r","fill"],jl={key:0},Gl={key:0},Ul=["d","stroke"],Kl=["text-anchor","x","y","fill"],ql=["cx","cy","r","fill"],Ql={key:0},Jl=["cx","cy","fill"],Zl={key:1},ea=["d","fill","stroke"],la={key:2},aa=["d","fill","stroke"],ta=["x","y","font-size","fill"],oa=["x","y","width","fill","onClick"],ua=["x","y","width","height","onMouseenter","onClick"],sa={key:3,"data-cy-zoom":"",class:"vue-ui-donut-evolution-dialog"},na=["x","y","width","height","fill"],ra=["x1","y1","x2","y2","stroke"],ia=["x1","y2","x2","y1","stroke"],va=["onKeypress","cx","cy","r"],ca=["d","stroke"],da=["cx","cy","r","fill"],ya=["d","fill","stroke"],ha={class:"vue-ui-donut-evolution-focus"},ga=["text-anchor","x","y","fill"],fa=["cx","cy","r","fill"],ba=["cx","cy","r","fill"],xa=["x","y","fill"],pa=["x","y","font-size","fill"],ma={key:5,class:"vue-data-ui-watermark"},ka=["onClick"],Ca={key:0},wa={key:1},$a={key:9,ref:"source",dir:"auto"},La={key:0},Aa={key:1},Na={__name:"vue-ui-donut-evolution",props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:["selectLegend"],setup(Me,{expose:Be,emit:de}){const A=Me,{vue_ui_donut_evolution:De}=Ze(),X=x(()=>!!A.dataset&&A.dataset.length),y=p({start:0,end:Math.max(...A.dataset.map(a=>a.values.length))});function ye(){y.value={start:0,end:M.value},fe.value+=1}el(()=>{he()});function he(){ll(A.dataset)?U({componentName:"VueUiDonutEvolution",type:"dataset"}):A.dataset.length&&A.dataset.forEach((a,i)=>{al({datasetObject:a,requiredAttributes:["name","values"]}).forEach(l=>{U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:l,index:i})})})}const O=p(Te()),C=p([]),f=p(null),ee=p(null),N=p(!1),z=p(null),le=p(null),Xe=p(null),ge=p(0),fe=p(0),be=p(0),xe=p(0),pe=p(0),e=x({get:()=>me(),set:a=>a});function me(){const a=Ve({userConfig:A.config,defaultConfig:De});return a.theme?{...Ve({userConfig:ol.vue_ui_donut_evolution[a.theme]||A.config,defaultConfig:a}),customPalette:tl[a.theme]||K}:a}We(()=>A.config,a=>{e.value=me(),he(),be.value+=1,xe.value+=1,pe.value+=1},{deep:!0}),We(()=>A.dataset,a=>{ye()},{deep:!0});const{isPrinting:ke,isImaging:Ce,generatePdf:we,generateImage:$e}=fl({elementId:O.value,fileName:e.value.style.chart.title.text||"vue-ui-donut-evolution"}),Ye=x(()=>e.value.userOptions.show&&!e.value.style.chart.title.text),je=x(()=>ul(e.value.customPalette)),Y=p({showTable:e.value.table.show}),s=x(()=>({top:e.value.style.chart.layout.padding.top,right:e.value.style.chart.layout.padding.right,bottom:e.value.style.chart.layout.padding.bottom,left:e.value.style.chart.layout.padding.left})),r=x(()=>{const a=e.value.style.chart.layout.height,i=e.value.style.chart.layout.width,l=a-s.value.top-s.value.bottom,n=i-s.value.left-s.value.right;return{absoluteHeight:a,absoluteWidth:i,centerX:s.value.left+n/2,centerY:s.value.top+l/2,height:l,width:n}}),W=x(()=>(A.dataset.forEach((a,i)=>{[null,void 0].includes(a.name)&&U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"name",index:i}),[null,void 0].includes(a.values)&&U({componentName:"VueUiDonutEvolution",type:"datasetSerieAttribute",property:"values",index:i})}),A.dataset.map((a,i)=>({...a,values:sl(a.values),color:re(a.color)||je.value[i]||K[i]||K[i%K.length],length:(a.values||[]).length,uid:Te()})))),V=x(()=>W.value.filter(a=>!C.value.includes(a.uid)).map(a=>({...a,values:a.values.filter((i,l)=>l>=y.value.start&&l<=y.value.end)}))),M=x(()=>Math.max(...V.value.map(a=>a.length))),$=x(()=>r.value.width/(y.value.end-y.value.start)),w=x(()=>{const a=[];for(let u=0;u<y.value.end-y.value.start;u+=1){const g=V.value.map(F=>F.values[u]??null),h=g.filter(F=>[void 0,null].includes(F)).length===g.length,S=g.reduce((F,L)=>F+L,0),ne=g.map(F=>F/S),R=s.value.left+$.value*u+$.value/2;a.push({index:u,percentages:ne,subtotal:h||S<0?null:S,values:g,x:R})}const i=0,l=Math.max(...a.map(u=>u.subtotal)),n=a.length===1?l*2:l;return a.map((u,g)=>{const h=$.value/2*.7,S=h>r.value.width/16?r.value.width/16:h,ne=f.value===u.index?r.value.width/16:S,R=a.length>4?h*2:h*2>$.value/2*.7?$.value/2*.7:h*2,F=r.value.absoluteHeight-s.value.bottom-r.value.height*u.subtotal/Ee(i,n,e.value.style.chart.layout.grid.yAxis.dataLabels.steps).max;return{...u,y:F,radius:S,activeRadius:ne,hoverRadius:R,donut:ie({series:V.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},u.x,F,S,S,1.99999,2,1,360,105.25,S/2),donutHover:ie({series:V.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},u.x,F,R,R,1.99999,2,1,360,105.25,R/2),donutFocus:ie({series:V.value.map((L,Pe)=>({color:L.color,name:L.name,value:L.values[g]??0}))},r.value.centerX,r.value.centerY,r.value.height/3.6,r.value.height/3.6,1.99999,2,1,360,105.25,r.value.height/6)}})});function j(a,i,l){return ce(e.value.style.chart.layout.dataLabels.formatter,a,J({p:e.value.style.chart.layout.dataLabels.prefix,v:a,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.dataLabels.rounding}),{datapoint:i,index:l})}const ae=x(()=>({max:Math.max(...w.value.map(a=>a.subtotal)),min:0})),H=x(()=>{const a=w.value.length===1?ae.value.max*2:ae.value.max;return Ee(ae.value.min,a,e.value.style.chart.layout.grid.yAxis.dataLabels.steps)});function Ge(a){return a/H.value.max}const Ue=x(()=>H.value.ticks.map(a=>({y:r.value.absoluteHeight-s.value.bottom-r.value.height*Ge(a),value:a})));function Le(a,i){return isNaN(a.value/He(i,"value"))?0:(a.value/He(i,"value")*100).toFixed(0)+"%"}function Ae(){N.value||(f.value=null,ee.value=null)}function Ke(a){N.value||(f.value=a.index,ee.value=a)}const te=p(null);function oe(a,i){a.subtotal&&(ee.value=null,f.value=null,N.value=!0,z.value=a,[null,void 0].includes(i)||(te.value=i))}function Ne(){z.value=null,N.value=!1,te.value=null}const ze=x(()=>W.value.map((a,i)=>({name:a.name,value:a.values.slice(y.value.start,y.value.end).reduce((l,n)=>l+n,0),shape:"circle",uid:a.uid,color:a.color})).sort((a,i)=>i.value-a.value).map(a=>({...a,opacity:C.value.includes(a.uid)?.5:1,segregate:()=>ue(a.uid),isSegregated:C.value.includes(a.uid)}))),Se=x(()=>w.value.map(a=>a.subtotal).reduce((a,i)=>a+i,0)),qe=x(()=>({cy:"donut-div-legend",backgroundColor:e.value.style.chart.legend.backgroundColor,color:e.value.style.chart.legend.color,fontSize:e.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:e.value.style.chart.legend.bold?"bold":""}));function ue(a){if(C.value.includes(a))C.value=C.value.filter(i=>i!==a),de("selectLegend",null);else{if(C.value.length===W.value.length-1)return;C.value.push(a),de("selectLegend",W.value.find(i=>i.uid===a))}z.value&&oe(w.value.find((i,l)=>l===te.value))}const I=x(()=>{const a=[""].concat(W.value.filter(u=>!C.value.includes(u.uid)).map(u=>({name:u.name,color:u.color}))).concat(["Î£"]);let i=[];for(let u=0;u<M.value;u+=1){const g=W.value.filter(h=>!C.value.includes(h.uid)).map(h=>h.values[u]??0).reduce((h,S)=>h+S,0);i.push([e.value.style.chart.layout.grid.xAxis.dataLabels.values[u]??"-"].concat(W.value.filter(h=>!C.value.includes(h.uid)).map(h=>({value:h.values[u]??0,percentage:h.values[u]?h.values[u]/g*100:0}))).concat([`${e.value.style.chart.layout.dataLabels.prefix}${Number(g.toFixed(e.value.table.td.roundingValue))}${e.value.style.chart.layout.dataLabels.suffix}`]))}const l={th:{backgroundColor:e.value.table.th.backgroundColor,color:e.value.table.th.color,outline:e.value.table.th.outline},td:{backgroundColor:e.value.table.td.backgroundColor,color:e.value.table.td.color,outline:e.value.table.td.outline},breakpoint:e.value.table.responsiveBreakpoint},n=[e.value.table.columnNames.period].concat(W.value.filter(u=>!C.value.includes(u.uid)).map(u=>u.name)).concat(e.value.table.columnNames.total);return{head:a,body:i,config:l,colNames:n}});function Qe(){return W.value}function Fe(){nl(()=>{const a=[[e.value.style.chart.title.text],[e.value.style.chart.title.subtitle.text],[""]],i=[...I.value.head.map(g=>g.name??g)],l=[...I.value.body.map(g=>g.map(h=>h.value??h))],n=a.concat([i]).concat(l),u=rl(n);il({csvContent:u,title:e.value.style.chart.title.text||"vue-ui-donut-evolution"})})}const B=p(!1);function Je(a){B.value=a,ge.value+=1}function _e(){Y.value.showTable=!Y.value.showTable}const G=p(!1);function se(){G.value=!G.value}return Be({getData:Qe,generatePdf:we,generateCsv:Fe,generateImage:$e,toggleTable:_e,toggleAnnotator:se}),(a,i)=>(t(),o("div",{ref_key:"donutEvolutionChart",ref:le,class:T(`vue-ui-donut-evolution ${B.value?"vue-data-ui-wrapper-fullscreen":""} ${e.value.useCssAnimation?"":"vue-ui-dna"}`),style:ve(`font-family:${e.value.style.fontFamily};width:100%; text-align:center;background:${e.value.style.chart.backgroundColor}`),id:O.value},[e.value.userOptions.buttons.annotator?(t(),E(bl,{key:0,parent:le.value,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,active:G.value,onClose:se},null,8,["parent","backgroundColor","color","active"])):c("",!0),Ye.value?(t(),o("div",{key:1,ref_key:"noTitle",ref:Xe,class:"vue-data-ui-no-title-space",style:"height:36px; width: 100%;background:transparent"},null,512)):c("",!0),e.value.style.chart.title.text?(t(),o("div",{key:2,style:"width:100%;background:transparent;padding-bottom:24px",onMouseleave:Ae},[(t(),E(xl,{key:`title_${be.value}`,config:{title:{cy:"donut-evolution-div-title",...e.value.style.chart.title},subtitle:{cy:"donut-evolution-div-subtitle",...e.value.style.chart.title.subtitle}}},null,8,["config"]))],32)):c("",!0),e.value.userOptions.show&&X.value?(t(),E(pl,{ref:"details",key:`user_options_${ge.value}`,backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color,isPrinting:v(ke),isImaging:v(Ce),uid:O.value,hasPdf:e.value.userOptions.buttons.pdf,hasImg:e.value.userOptions.buttons.img,hasXls:e.value.userOptions.buttons.csv,hasTable:e.value.userOptions.buttons.table,hasFullscreen:e.value.userOptions.buttons.fullscreen,isFullscreen:B.value,titles:{...e.value.userOptions.buttonTitles},chartElement:le.value,position:e.value.userOptions.position,hasAnnotator:e.value.userOptions.buttons.annotator,isAnnotation:G.value,onToggleFullscreen:Je,onGeneratePdf:v(we),onGenerateCsv:Fe,onGenerateImage:v($e),onToggleTable:_e,onToggleAnnotator:se},vl({_:2},[a.$slots.optionPdf?{name:"optionPdf",fn:_(()=>[P(a.$slots,"optionPdf",{},void 0,!0)]),key:"0"}:void 0,a.$slots.optionCsv?{name:"optionCsv",fn:_(()=>[P(a.$slots,"optionCsv",{},void 0,!0)]),key:"1"}:void 0,a.$slots.optionImg?{name:"optionImg",fn:_(()=>[P(a.$slots,"optionImg",{},void 0,!0)]),key:"2"}:void 0,a.$slots.optionTable?{name:"optionTable",fn:_(()=>[P(a.$slots,"optionTable",{},void 0,!0)]),key:"3"}:void 0,a.$slots.optionFullscreen?{name:"optionFullscreen",fn:_(({toggleFullscreen:l,isFullscreen:n})=>[P(a.$slots,"optionFullscreen",q(Q({toggleFullscreen:l,isFullscreen:n})),void 0,!0)]),key:"4"}:void 0,a.$slots.optionAnnotator?{name:"optionAnnotator",fn:_(({toggleAnnotator:l,isAnnotator:n})=>[P(a.$slots,"optionAnnotator",q(Q({toggleAnnotator:l,isAnnotator:n})),void 0,!0)]),key:"5"}:void 0]),1032,["backgroundColor","color","isPrinting","isImaging","uid","hasPdf","hasImg","hasXls","hasTable","hasFullscreen","isFullscreen","titles","chartElement","position","hasAnnotator","isAnnotation","onGeneratePdf","onGenerateImage"])):c("",!0),X.value?(t(),o("svg",{key:4,xmlns:v(cl),class:T({"vue-data-ui-fullscreen--on":B.value,"vue-data-ui-fulscreen--off":!B.value}),viewBox:`0 0 ${r.value.absoluteWidth} ${r.value.absoluteHeight}`,style:ve(`max-width:100%; overflow: visible; background:transparent;color:${e.value.style.chart.color}`)},[dl(ml),d("defs",null,[d("linearGradient",{id:`hover_${O.value}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[d("stop",{offset:"0%","stop-color":v(D)(e.value.style.chart.backgroundColor,e.value.style.chart.layout.highlighter.opacity)},null,8,Sl),d("stop",{offset:"100%","stop-color":v(D)(e.value.style.chart.layout.highlighter.color,e.value.style.chart.layout.highlighter.opacity)},null,8,Fl)],8,zl),d("radialGradient",{id:`focus_${O.value}`},[d("stop",{offset:"0%","stop-color":v(D)(v(re)(e.value.style.chart.backgroundColor),0)},null,8,Pl),d("stop",{offset:"77%","stop-color":v(D)("#FFFFFF",30)},null,8,Tl),d("stop",{offset:"100%","stop-color":v(D)(v(re)(e.value.style.chart.backgroundColor),0)},null,8,Wl)],8,_l)]),e.value.style.chart.layout.grid.show?(t(),o("g",El,[d("line",{x1:s.value.left,x2:s.value.left,y1:s.value.top,y2:s.value.top+r.value.height,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Ol),d("line",{x1:s.value.left,x2:r.value.absoluteWidth-s.value.right,y1:r.value.absoluteHeight-s.value.bottom,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Hl),e.value.style.chart.layout.grid.showVerticalLines?(t(),o("g",Il,[(t(!0),o(m,null,k(y.value.end-y.value.start,(l,n)=>(t(),o("line",{x1:s.value.left+(n+1)*$.value,x2:s.value.left+(n+1)*$.value,y1:s.value.top,y2:r.value.absoluteHeight-s.value.bottom,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth,"stroke-linecap":"round"},null,8,Rl))),256))])):c("",!0)])):c("",!0),e.value.style.chart.layout.grid.yAxis.dataLabels.show?(t(),o("g",{key:1,class:T({"donut-opacity":!0,"donut-behind":f.value!==null||N.value})},[(t(!0),o(m,null,k(Ue.value,(l,n)=>(t(),o("g",null,[l.value>=H.value.min&&l.value<=H.value.max?(t(),o("line",{key:0,x1:s.value.left,x2:s.value.left-5,y1:l.y,y2:l.y,stroke:e.value.style.chart.layout.grid.stroke,"stroke-width":e.value.style.chart.layout.grid.strokeWidth},null,8,Vl)):c("",!0),l.value>=H.value.min&&l.value<=H.value.max?(t(),o("text",{key:1,x:s.value.left-8+e.value.style.chart.layout.grid.yAxis.dataLabels.offsetX,y:l.y+e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize/3,"font-size":e.value.style.chart.layout.grid.yAxis.dataLabels.fontSize,"text-anchor":"end",fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-weight":e.value.style.chart.layout.grid.yAxis.dataLabels.bold?"bold":"normal"},b(v(yl)(l.value)?v(ce)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(J)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.layout.grid.yAxis.dataLabels.roundingValue}),{datapoint:l,seriesIndex:n}):""),9,Ml)):c("",!0)]))),256))],2)):c("",!0),e.value.style.chart.layout.grid.xAxis.dataLabels.show?(t(),o("g",{key:2,class:T({"donut-opacity":!0,"donut-behind":N.value})},[(t(!0),o(m,null,k(y.value.end-y.value.start,(l,n)=>(t(),o("g",null,[e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast&&(n===0||n===M.value-1)||!e.value.style.chart.layout.grid.xAxis.dataLabels.showOnlyFirstAndLast?(t(),o("text",{key:0,"text-anchor":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation>0?"start":e.value.style.chart.layout.grid.xAxis.dataLabels.rotation<0?"end":"middle","font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize,fill:e.value.style.chart.layout.grid.xAxis.dataLabels.color,transform:`translate(${s.value.left+$.value*n+$.value/2}, ${e.value.style.chart.layout.grid.xAxis.dataLabels.offsetY+r.value.absoluteHeight-s.value.bottom+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2}), rotate(${e.value.style.chart.layout.grid.xAxis.dataLabels.rotation})`},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(n)+Number(y.value.start)]??""),9,Bl)):c("",!0)]))),256))],2)):c("",!0),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("g",null,[e.value.style.chart.layout.line.show&&n<w.value.length-1&&![l.subtotal,w.value[n+1].subtotal].includes(null)?(t(),o("line",{key:0,class:T({"donut-opacity":!0,"donut-behind":f.value!==null||N.value}),x1:l.x,y1:l.y,x2:w.value[n+1].x,y2:w.value[n+1].y,stroke:e.value.style.chart.layout.line.stroke,"stroke-width":e.value.style.chart.layout.line.strokeWidth,"stroke-linecap":"round","stroke-linejoin":"round"},null,10,Dl)):c("",!0),l.subtotal!==null?(t(),o("g",Xl,[l.subtotal?(t(),o("circle",{key:0,cx:l.x,cy:l.y,r:l.activeRadius,fill:e.value.style.chart.backgroundColor},null,8,Yl)):c("",!0)])):c("",!0)]))),256)),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal?(t(),o("g",jl,[f.value!==null&&f.value===n?(t(),o("g",Gl,[(t(!0),o(m,null,k(l.donutHover,u=>(t(),o("g",null,[d("path",{d:v(Oe)(u,{x:u.center.endX,y:u.center.endY},12,12,{x:l.x,y:l.y},!0,20),stroke:u.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,8,Ul)]))),256)),(t(!0),o(m,null,k(l.donutHover,(u,g)=>(t(),o("g",null,[d("text",{"data-cy-hover-label":"","text-anchor":v(Z)(u,!0,0).anchor,x:v(Z)(u,!0,3).x,y:v(Ie)(u),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":8,"font-weight":"bold"},b(u.name)+": "+b(Le(u,l.donut))+" ("+b(u.value===null?"-":j(u.value,u,g))+") ",9,Kl)]))),256)),d("g",null,[d("circle",{cx:l.x,cy:l.y,r:l.hoverRadius,fill:e.value.style.chart.backgroundColor},null,8,ql)])])):c("",!0)])):c("",!0)],2))),256)),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal!==null?(t(),o("g",Ql,[l.subtotal===0?(t(),o("circle",{key:0,cx:l.x,cy:l.y,r:3,fill:e.value.style.chart.color},null,8,Jl)):f.value!==null&&f.value===n?(t(),o("g",Zl,[(t(!0),o(m,null,k(l.donutHover,(u,g)=>(t(),o("path",{d:u.arcSlice,fill:`${u.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor},null,8,ea))),256))])):(t(),o("g",la,[(t(!0),o(m,null,k(l.donut,(u,g)=>(t(),o("path",{d:u.arcSlice,fill:`${u.color}`,"stroke-width":.5,stroke:e.value.style.chart.backgroundColor},null,8,aa))),256))]))])):c("",!0)],2))),256)),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("g",{class:T({"donut-opacity":!0,"donut-behind":n!==f.value&&f.value!==null||N.value})},[l.subtotal!==null&&e.value.style.chart.layout.dataLabels.show?(t(),o("text",{key:0,"text-anchor":"middle",x:l.x,y:f.value===l.index&&l.subtotal?l.y+e.value.style.chart.layout.dataLabels.fontSize/3:l.y-l.radius-e.value.style.chart.layout.dataLabels.fontSize+e.value.style.chart.layout.dataLabels.offsetY,"font-size":e.value.style.chart.layout.dataLabels.fontSize,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color},b(j(l.subtotal,l,n)),9,ta)):c("",!0)],2))),256)),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("rect",{x:s.value.left+n*$.value,y:r.value.absoluteHeight-s.value.bottom-10,width:$.value,height:10,fill:f.value===l.index?`url(#hover_${O.value})`:"transparent",onClick:u=>oe(l,n),class:T({"donut-hover":f.value===l.index&&l.subtotal})},null,10,oa))),256)),(t(!0),o(m,null,k(w.value,(l,n)=>(t(),o("rect",{"data-cy-trap":"",x:s.value.left+n*$.value,y:s.value.top,width:$.value,height:r.value.height,fill:"transparent",onMouseenter:u=>Ke(l),onMouseleave:Ae,onClick:u=>oe(l,n),class:T({"donut-hover":f.value===l.index&&l.subtotal})},null,42,ua))),256)),N.value?(t(),o("g",sa,[d("rect",{rx:4,x:s.value.left,y:s.value.top,width:r.value.width,height:r.value.height,fill:e.value.style.chart.backgroundColor,style:{filter:"drop-shadow(0 12px 12px rgba(0,0,0,0.3))"}},null,8,na),d("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y1:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y2:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,ra),d("line",{"data-html2canvas-ignore":"",x1:r.value.absoluteWidth-s.value.right-15,y2:s.value.top+5,x2:r.value.absoluteWidth-s.value.right-4,y1:s.value.top+15.5,"stroke-linecap":"round",stroke:e.value.style.chart.color,"stroke-width":"1.5"},null,8,ia),d("circle",{"data-cy-close":"",onClick:Ne,onKeypress:hl(Ne,["enter"]),cx:r.value.absoluteWidth-s.value.right-r.value.width/40,cy:s.value.top+r.value.height/30,r:r.value.height/12,fill:"transparent",style:{cursor:"pointer"},tabindex:"0"},null,40,va),(t(!0),o(m,null,k(z.value.donutFocus,l=>(t(),o("g",null,[d("path",{"data-cy-zoom-donut":"",d:v(Oe)(l,{x:r.value.centerX,y:r.value.centerY},12,12,!1,!1,15),stroke:l.color,"stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none",class:"vue-ui-donut-evolution-focus"},null,8,ca)]))),256)),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7,fill:e.value.style.chart.backgroundColor},null,8,da),(t(!0),o(m,null,k(z.value.donutFocus,(l,n)=>(t(),o("path",{d:l.arcSlice,fill:`${l.color}`,"stroke-width":1,stroke:e.value.style.chart.backgroundColor,class:"vue-ui-donut-evolution-focus"},null,8,ya))),256)),(t(!0),o(m,null,k(z.value.donutFocus,(l,n)=>(t(),o("g",ha,[d("text",{"text-anchor":v(Z)(l,!0,20).anchor,x:v(Z)(l,!0,10).x,y:v(Ie)(l),fill:e.value.style.chart.layout.grid.yAxis.dataLabels.color,"font-size":10,"font-weight":"bold"},b(l.name)+": "+b(Le(l,z.value.donutFocus))+" ("+b(l.value===null?"-":j(l.value,l,n))+") ",9,ga)]))),256)),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/3.8,fill:`url(#focus_${O.value})`},null,8,fa),d("circle",{cx:s.value.left+r.value.width/2,cy:s.value.top+r.value.height/2,r:r.value.height/7.7,fill:e.value.style.chart.backgroundColor},null,8,ba),d("text",{"text-anchor":"middle",x:s.value.left+r.value.width/2,y:s.value.top+r.value.height/2+14/3,"font-size":14,"font-weight":"bold",fill:e.value.style.chart.layout.dataLabels.color,class:"vue-ui-donut-evolution-focus"},b(j(z.value.subtotal,z.value,null)),9,xa),e.value.style.chart.layout.grid.xAxis.dataLabels.values[z.value.index]?(t(),o("text",{key:0,x:s.value.left+6,y:s.value.top+e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*2,"font-size":e.value.style.chart.layout.grid.xAxis.dataLabels.fontSize*1.6,fill:e.value.style.chart.layout.dataLabels.color},b(e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(z.value.index)+Number(y.value.start)]),9,pa)):c("",!0)])):c("",!0),P(a.$slots,"svg",{svg:r.value},void 0,!0)],14,Nl)):c("",!0),a.$slots.watermark?(t(),o("div",ma,[P(a.$slots,"watermark",q(Q({isPrinting:v(ke)||v(Ce)})),void 0,!0)])):c("",!0),X.value?c("",!0):(t(),E(kl,{key:6,config:{type:"donutEvolution",style:{backgroundColor:e.value.style.chart.backgroundColor,donutEvolution:{axis:{color:"#CCCCCC"},donuts:{color:"#CCCCCC"}}}}},null,8,["config"])),M.value>1&&e.value.style.chart.zoom.show?(t(),E(Ll,{key:`slicer_${fe.value}`,background:e.value.style.chart.zoom.color,borderColor:e.value.style.chart.backgroundColor,fontSize:e.value.style.chart.zoom.fontSize,useResetSlot:e.value.style.chart.zoom.useResetSlot,labelLeft:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.start)]||"",labelRight:e.value.style.chart.layout.grid.xAxis.dataLabels.values[Number(y.value.end)-1]||"",textColor:e.value.style.chart.color,inputColor:e.value.style.chart.zoom.color,selectColor:e.value.style.chart.zoom.highlightColor,max:M.value,min:0,valueStart:y.value.start,valueEnd:y.value.end,start:y.value.start,"onUpdate:start":i[0]||(i[0]=l=>y.value.start=l),end:y.value.end,"onUpdate:end":i[1]||(i[1]=l=>y.value.end=l),onReset:ye},{"reset-action":_(({reset:l})=>[P(a.$slots,"reset-action",q(Q({reset:l})),void 0,!0)]),_:3},8,["background","borderColor","fontSize","useResetSlot","labelLeft","labelRight","textColor","inputColor","selectColor","max","valueStart","valueEnd","start","end"])):c("",!0),e.value.style.chart.legend.show?(t(),E($l,{key:`legend_${pe.value}`,legendSet:ze.value,config:qe.value,onClickMarker:i[2]||(i[2]=({legend:l})=>ue(l.uid))},{item:_(({legend:l,index:n})=>[d("div",{"data-cy-legend-item":"",onClick:u=>ue(l.uid),style:ve(`opacity:${C.value.includes(l.uid)?.5:1}`)},[Re(b(l.name)+": "+b(v(ce)(e.value.style.chart.layout.dataLabels.formatter,l.value,v(J)({p:e.value.style.chart.layout.dataLabels.prefix,v:l.value,s:e.value.style.chart.layout.dataLabels.suffix,r:e.value.style.chart.legend.roundingValue}),{datapoint:l,seriesIndex:n}))+" ",1),C.value.includes(l.uid)?(t(),o("span",wa," ( - % ) ")):(t(),o("span",Ca," ("+b(isNaN(l.value/Se.value)?"-":v(J)({v:l.value/Se.value*100,s:"%",r:e.value.style.chart.legend.roundingPercentage}))+") ",1))],12,ka)]),_:1},8,["legendSet","config"])):c("",!0),P(a.$slots,"legend",{legend:ze.value},void 0,!0),a.$slots.source?(t(),o("div",$a,[P(a.$slots,"source",{},void 0,!0)],512)):c("",!0),X.value?(t(),E(Cl,{key:10,hideDetails:"",config:{open:Y.value.showTable,maxHeight:1e4,body:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color},head:{backgroundColor:e.value.style.chart.backgroundColor,color:e.value.style.chart.color}}},{content:_(()=>[(t(),E(wl,{key:`table_${xe.value}`,colNames:I.value.colNames,head:I.value.head,body:I.value.body,config:I.value.config,title:`${e.value.style.chart.title.text}${e.value.style.chart.title.subtitle.text?` : ${e.value.style.chart.title.subtitle.text}`:""}`,onClose:i[3]||(i[3]=l=>Y.value.showTable=!1)},{th:_(({th:l})=>[Re(b(l.name??l),1)]),td:_(({td:l})=>[l.value===null?(t(),o("span",La,"-")):(t(),o("b",Aa,b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.prefix)+b(!isNaN(l.value)&&l.value!==null?Number(l.value.toFixed(e.value.table.td.roundingValue)).toLocaleString():l)+b(isNaN(l.value)?"":e.value.style.chart.layout.dataLabels.suffix),1)),d("span",null,b(l.percentage&&!isNaN(l.percentage)?`(${Number(l.percentage.toFixed(e.value.table.td.roundingPercentage)).toLocaleString()}%)`:""),1)]),_:1},8,["colNames","head","body","config","title"]))]),_:1},8,["config"])):c("",!0)],14,Al))}},Ta=gl(Na,[["__scopeId","data-v-800b47b9"]]);export{Ta as default};
